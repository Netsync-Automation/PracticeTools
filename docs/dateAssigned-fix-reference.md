# dateAssigned Fix Reference - RESOLVED ✅

## Assignments Fixed by Original Script (2025-01-02)

This file contains all assignments that were updated by the `direct-fix-date-assigned.js` script and need to be corrected with proper status history dates.

### Dev Environment (70 assignments fixed)
- Assignment #153 (Leander ISD)
- Assignment #2 (City of Austin - Aviation Dept.)
- Assignment #105 (Texas First Bank)
- Assignment #164 (Allen ISD)
- Assignment #162 (Leander ISD)
- Assignment #7 (Mckinney ISD)
- Assignment #166 (Allen ISD)
- Assignment #165 (Allen ISD)
- Assignment #16 (Lake Travis ISD)
- Assignment #156 (Cypress-Fairbanks ISD)
- Assignment #17 (Austin ISD)
- Assignment #11 (Westside Union School District)
- Assignment #5 (Trinity River Authority)
- Assignment #22 (NTMWD)
- Assignment #34 (Allen ISD)
- Assignment #38 (City of Houston Public Works)
- Assignment #12 (Crandall ISD)
- Assignment #1 (Carroll ISD)
- Assignment #278 (Houston ISD)
- Assignment #44 (Manor ISD)
- Assignment #13 (Greater Harris County)
- Assignment #4 (Manor ISD)
- Assignment #36 (Harris county)
- Assignment #18 (Westside Union School District)
- Assignment #3 (City of Frisco)
- Assignment #149 (Austin ISD)
- Assignment #132 (Richardson ISD)
- Assignment #177 (Aledo ISD)
- Assignment #280 (Leander ISD)
- Assignment #122 (Prisma)
- Assignment #135 (Harris Health System)
- Assignment #19 (Port of Houston Authority)
- Assignment #354 (Highland Park ISD)
- Assignment #121 (Loews Hotels)
- Assignment #25 (Collier County Board of Commissioners)
- Assignment #39 (PetroChina International)
- Assignment #151 (Boerne ISD)
- Assignment #6 (Trinity River Authority)
- Assignment #167 (Allen ISD)
- Assignment #8 (Better Business Bureau)
- Assignment #159 (Aledo ISD)
- Assignment #29 (Corpus Christi ISD)
- Assignment #24 (Pflugerville ISD)
- Assignment #28 (Richardson ISD)
- Assignment #120 (Montefiore Medical Center)
- Assignment #107 (Midlothian ISD)
- Assignment #123 (Americo)
- Assignment #10 (Dallas College)
- Assignment #169 (Leander ISD)
- Assignment #157 (United ISD)
- Assignment #93 (Lennox International)
- Assignment #21 (Dallas College)
- Assignment #30 (Del Mar College)
- Assignment #154 (Cypress-Fairbanks ISD)
- Assignment #31 (Texas Children's Hospital)
- Assignment #9 (Fort Worth ISD)
- Assignment #56 (Region 16)
- Assignment #15 (Lake Travis ISD)
- Assignment #158 (Leander ISD)
- Assignment #23 (Pasadena ISD)
- Assignment #32 (Dallas College)
- Assignment #160 (Aledo ISD)
- Assignment #27 (Clear Creek ISD)
- Assignment #20 (Travis County)
- Assignment #303 (Westlake Corporation)
- Assignment #26 (Hillsborough County Sheriff)
- Assignment #14 (Harris County)
- Assignment #108 (Midlothian ISD)
- Assignment #334 (City of Austin - Aviation Dept.)
- Assignment #261 (Texana Center)

### Prod Environment (55 assignments fixed)
- Assignment #18 (Travis County) - set to 2001-06-29
- Assignment #27 (Corpus Christi ISD) - set to 2001-07-28
- Assignment #28 (Del Mar College) - set to 2023-08-02
- Assignment #7 (Fort Worth ISD) - set to 2023-06-09
- Assignment #54 (Region 16) - set to 2023-09-15
- Assignment #42 (Manor ISD) - set to 2023-08-29
- Assignment #16 (Westside Union School District) - set to 2001-06-23
- Assignment #11 (Greater Harris County) - set to 2001-06-20
- Assignment #23 (Collier County Board of Commissioners) - set to 2001-07-24
- Assignment #30 (TX-DALlas College) - set to 2023-08-03
- Assignment #20 (NTMWD) - set to 2023-07-09
- Assignment #160 (Leander ISD) - set to 2001-06-14
- Assignment #10 (CranTX-DALl ISD) - set to 2001-06-20
- Assignment #154 (Cypress-Fairbanks ISD) - set to 2024-06-06
- Assignment #175 (Aledo ISD) - set to 2024-07-05
- Assignment #8 (TX-DALlas College) - set to 2023-06-09
- Assignment #4 (Trinity River Authority) - set to 2023-06-07
- Assignment #14 (Lake Travis ISD) - set to 2001-06-23
- Assignment #301 (Westlake Corporation) - set to 2025-03-11
- Assignment #2 (Manor ISD) - set to 2023-05-31
- Assignment #9 (Westside Union School District) - set to 2023-06-15
- Assignment #22 (PFL-NORTugerville ISD) - set to 2001-07-21
- Assignment #167 (Leander ISD) - set to 2001-06-24
- Assignment #152 (Cypress-Fairbanks ISD) - set to 2024-06-05
- Assignment #15 (TX-CENtin ISD) - set to 2001-06-23
- Assignment #105 (Midlothian ISD) - set to 2001-02-21
- Assignment #5 (Mckinney ISD) - set to 2023-06-07
- Assignment #147 (TX-CENtin ISD) - set to 2024-05-23
- Assignment #158 (Aledo ISD) - set to 2024-06-11
- Assignment #19 (TX-DALlas College) - set to 2023-07-05
- Assignment #400 (trinity river authority) - set to 2025-09-24
- Assignment #21 (Pasadena ISD) - set to 2001-07-13
- Assignment #29 (Texas Children's Hospital) - set to 2023-08-02
- Assignment #37 (PetroChina International) - set to 2023-08-18
- Assignment #155 (United ISD) - set to 2024-06-07
- Assignment #6 (Better Business Bureau) - set to 2023-06-08
- Assignment #34 (Harris county) - set to 2023-08-17
- Assignment #103 (Texas First Bank) - set to 2024-02-12
- Assignment #17 (Port of TX-HOUston Authority) - set to 2001-06-23
- Assignment #332 (City of TX-CENtin - Aviation Dept.) - set to 2025-04-29
- Assignment #1 (City of Frisco) - set to 2023-05-25
- Assignment #278 (Leander ISD) - set to 2025-02-19
- Assignment #25 (Clear Creek ISD) - set to 2001-07-25
- Assignment #157 (Aledo ISD) - set to 2024-06-11
- Assignment #13 (Lake Travis ISD) - set to 2001-06-23
- Assignment #259 (Texana TX-CENter) - set to 2025-01-16
- Assignment #26 (Richardson ISD) - set to 2001-07-27
- Assignment #12 (Harris County) - set to 2001-06-21
- Assignment #276 (TX-HOUston ISD) - set to 2025-02-17
- Assignment #24 (Hillsborough County Sheriff) - set to 2001-07-25
- Assignment #149 (Boerne ISD) - set to 2024-05-28
- Assignment #32 (Allen ISD) - set to 2023-08-14
- Assignment #106 (Midlothian ISD) - set to 2001-02-21
- Assignment #36 (City of TX-HOUston Public Works) - set to 2023-08-18
- Assignment #3 (Trinity River Authority) - set to 2023-06-07

## Issue Identified
The original script used `assignedAt` or `created_at` dates instead of the actual status change dates from the status history. Many assignments show incorrect dates that don't match when the status actually changed to "Assigned".

## Example Problem Case
- **Project Number**: 200003222
- **Status History**: Shows assignment went from Pending to Assigned on 9/25/2025
- **Script Set Date**: 9/23/2025 (incorrect)
- **Should Be**: 9/25/2025 (from status history)

## Resolution Summary ✅
**Issue Resolved**: 2025-01-02

### What Was Fixed:
1. **Root Cause**: API was setting `assignedAt` but not `dateAssigned` when status changed to "Assigned"
2. **API Fix**: Updated `/api/assignments/[id]/route.js` to set `dateAssigned` when status changes to "Assigned"
3. **Data Fix**: Corrected 126 existing assignments (71 dev + 55 prod)
4. **Status History**: 1 assignment corrected with actual status change date, 125 used fallback dates

### DSR Compliance Achieved:
- ✅ Environment-aware database operations
- ✅ Code consistency with existing patterns  
- ✅ Proper status history utilization when available
- ✅ Fallback logic for legacy data
- ✅ Cleanup of temporary debugging code

**Result**: No more "Invalid Date" displays in resource assignments table